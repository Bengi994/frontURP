"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{2698:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{BO:function(){return useResponsivePageDispatch},SM:function(){return responsivePageReducer},XG:function(){return useResponsivePageContext},fr:function(){return ResponsivePageContext}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294);let responsivePageReducer=(state,action)=>{switch(action.type){case"SET_USER":return{...state,user:action.user,isLogged:action.isLogged,isEmployee:action.isEmployee};case"SET_INVENTORIES":return{...state,inventories:action.inventories};default:return state}},ResponsivePageContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({}),useResponsivePageContext=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ResponsivePageContext),useResponsivePageDispatch=()=>{let{dispatch}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ResponsivePageContext),setUser=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((user,isLogged,isEmployee)=>{dispatch({type:"SET_USER",user,isLogged,isEmployee})},[dispatch]);return{setUser}}},8776:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Y:function(){return ResponsivePage}});var jsx_runtime=__webpack_require__(5893),Dropdown=__webpack_require__(1280),Button=__webpack_require__(5005),react=__webpack_require__(7294),next_router=__webpack_require__(1163),context=__webpack_require__(2698),SidebarContext=__webpack_require__(553);let Header=()=>{let{toggleSidebar}=(0,SidebarContext.S)(),[show,setShow]=(0,react.useState)(!1),router=(0,next_router.useRouter)(),{user,isLogged,isEmployee}=(0,context.XG)(),{setUser}=(0,context.BO)(),goToLogin=()=>router.push("iniciar-sesion"),handleLogout=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),setUser(void 0,!1,!1),router.push("/iniciar-sesion")},goToProfile=()=>router.push("/perfil"),goToMyOrders=()=>router.push("/mis-pedidos"),[isSidebarOpen,setIsSidebarOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:isLogged?(0,jsx_runtime.jsxs)("nav",{className:"navbar navbar-expand-lg cabecera--principal",children:[(0,jsx_runtime.jsx)("button",{onClick:toggleSidebar,className:"sidebar-toggle",children:(0,jsx_runtime.jsx)("img",{src:"\\menu.svg",alt:"Logo"})}),(0,jsx_runtime.jsxs)("div",{className:"acciones-defecto",children:[(0,jsx_runtime.jsx)("img",{src:"\\icon.svg",alt:"Logo"}),(0,jsx_runtime.jsx)("img",{src:"\\icon.svg",alt:"Logo"}),(0,jsx_runtime.jsx)("img",{src:"\\icon.svg",alt:"Logo"}),(0,jsx_runtime.jsx)("img",{src:"\\icon.svg",alt:"Logo"})]}),(0,jsx_runtime.jsx)("div",{className:"nombre-uni",children:(0,jsx_runtime.jsx)("h1",{children:"Universidad Ricardo Palma"})}),(0,jsx_runtime.jsxs)("div",{className:"alumno-acciones",children:[(0,jsx_runtime.jsx)("img",{src:"\\icon.svg",alt:"Logo"}),(0,jsx_runtime.jsx)("img",{src:"\\icon.svg",alt:"Logo"}),isLogged&&user?(0,jsx_runtime.jsxs)(Dropdown.Z,{children:[(0,jsx_runtime.jsx)(Dropdown.Z.Toggle,{variant:"light btn--loguin",id:"dropdown-basic",children:(0,jsx_runtime.jsx)("img",{src:"\\profile-circle.svg",alt:"Logo"})}),(0,jsx_runtime.jsxs)(Dropdown.Z.Menu,{children:[(0,jsx_runtime.jsxs)("p",{children:[user.nombre," ",user.apellido]}),(0,jsx_runtime.jsx)("p",{children:user.conferencia}),(0,jsx_runtime.jsx)(Dropdown.Z.Item,{onClick:goToProfile,children:"Mi perfil"}),!isEmployee&&(0,jsx_runtime.jsx)(Dropdown.Z.Item,{onClick:goToMyOrders,children:"Mis Pedidos"}),(0,jsx_runtime.jsx)(Dropdown.Z.Item,{onClick:handleLogout,children:"Cerrar Sesion"})]})]}):(0,jsx_runtime.jsx)(Button.Z,{className:"me-2 btn--loguin",variant:"light",onClick:goToLogin,children:"Iniciar Sesion"})]})]}):null})};var next_link=__webpack_require__(1664),link_default=__webpack_require__.n(next_link),Accordion=__webpack_require__(4076);let SideBar=()=>{let{isSidebarOpen,toggleSidebar}=(0,SidebarContext.S)(),{user}=(0,context.XG)();return(0,jsx_runtime.jsxs)("div",{className:"sidebar--admin ".concat(isSidebarOpen?"active":""),children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:toggleSidebar,className:"close-sidebar",children:(0,jsx_runtime.jsx)("img",{src:"\\menu.svg",alt:"Logo"})}),(0,jsx_runtime.jsx)("img",{src:"\\logo-urp.png",alt:"",className:"logo-urp"}),(0,jsx_runtime.jsx)("hr",{})]}),(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"#",children:"INFORMACI\xd3N PERSONAL"})}),(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"#",children:"AC\xc1DEMICO"})}),(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"#",children:"SERVICIOS"})}),(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"#",children:"GUIAS Y REGLAMENTOS"})}),(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"#",children:"CAT\xc1LOGO ABSYNET"})}),(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"#",children:"BASES DE DATOS"})}),(null==user?void 0:user.role.id)===4&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/administracion-salones",children:"Administraci\xf3n de salones"})})}),(null==user?void 0:user.role.id)===3&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Accordion.Z,{defaultActiveKey:"0",className:"acordeon-confes",children:(0,jsx_runtime.jsxs)(Accordion.Z.Item,{eventKey:"0",children:[(0,jsx_runtime.jsx)(Accordion.Z.Header,{children:"CONFERENCIAS"}),(0,jsx_runtime.jsxs)(Accordion.Z.Body,{children:[(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/solicitudes/",children:"Solicitudes pendientes"}),(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/solicitudes/solicitar-conferencia",children:"Nueva solicitud"}),(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/relacion-conferencias",children:"Relaci\xf3n de conferencias"}),(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/conferencia-curso/",children:"Conferencias en curso"})]})]})})}),(null==user?void 0:user.role.id)===7&&(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/administrar-solicitudes",children:"Administrar solicitudes de conferencias"})}),(null==user?void 0:user.role.id)===4&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("li",{className:"nav-item",children:(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/relacion-conferencias",children:"VER RELACI\xd3N DE CONFERENCIAS"})})}),(null==user?void 0:user.role.id)===5&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Accordion.Z,{defaultActiveKey:"0",className:"acordeon-confes",children:(0,jsx_runtime.jsxs)(Accordion.Z.Item,{eventKey:"0",children:[(0,jsx_runtime.jsx)(Accordion.Z.Header,{children:"CONFERENCIAS"}),(0,jsx_runtime.jsxs)(Accordion.Z.Body,{children:[(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/proximas-conferencias",children:"Pr\xf3ximas conferencias"}),(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/conferencias-pasadas",children:"Conferencias pasadas"}),(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/sugiere-conferencia",children:"Sugiere una conferencia"}),(0,jsx_runtime.jsx)(link_default(),{className:"nav-link",href:"/mis-conferencias",children:"Mis conferencias"})]})]})})})]})]})};var api=__webpack_require__(2400);let useInventory=()=>{let[products,setProducts]=(0,react.useState)([]),[inventories,setInventories]=(0,react.useState)([]),getProducts=async()=>{let{data}=await api.h.get("/productos/options");setProducts(data)},getInventories=async()=>{let{data}=await api.h.get("/inventarios");setInventories(data)},createInventory=async inventory=>{await api.h.post("/inventarios",{data:inventory}),await getInventories()},removeInventory=async inventoryId=>{await api.h.put("/inventarios/".concat(inventoryId),{data:{disponible:!1}}),await getInventories()},updateInventory=async inventory=>{await api.h.put("/inventarios/".concat(inventory.id),{data:{stock:inventory.stock,disponible:inventory.disponible}}),await getInventories()};return(0,react.useEffect)(()=>{getInventories()},[]),{products,inventories,createInventory,getProducts,removeInventory,updateInventory}},ResponsivePage=param=>{let{children,user}=param,[state,dispatch]=(0,react.useReducer)(context.SM,{user,isLogged:!1,isEmployee:!1,inventories:[]}),[checkUser,setCheckUser]=(0,react.useState)(!0),[showSideBar,setShowSideBar]=(0,react.useState)(!1),{inventories}=useInventory(),contextValue=(0,react.useMemo)(()=>({...state,dispatch}),[state]);return(0,react.useEffect)(()=>{if(checkUser&&user&&user!==state.user){let isEmployee=3!==user.role.id;setShowSideBar(isEmployee),dispatch({type:"SET_USER",user,isLogged:!0,isEmployee})}},[user,state.user,checkUser]),(0,react.useEffect)(()=>{let userRaw=localStorage.getItem("user");if(userRaw){let user=JSON.parse(userRaw);if(user){let isEmployee=999!==user.role.id;setCheckUser(!1),setShowSideBar(isEmployee),dispatch({type:"SET_USER",user,isLogged:!0,isEmployee})}}},[]),(0,react.useEffect)(()=>{if(inventories.length){let availableInventories=inventories.filter(inventory=>inventory.disponible);console.info("inventory",availableInventories),dispatch({type:"SET_INVENTORIES",inventories:availableInventories})}},[inventories]),(0,jsx_runtime.jsx)(context.fr.Provider,{value:contextValue,children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(Header,{}),showSideBar&&(0,jsx_runtime.jsx)(SideBar,{}),(0,jsx_runtime.jsx)("div",{className:"d-flex contenedor-main",children:(0,jsx_runtime.jsx)("div",{className:"container-fluid",children:children})})]})})}},2400:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{h:function(){return api}});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5121);let api=axios__WEBPACK_IMPORTED_MODULE_0__.Z.create({baseURL:"https://shrieking-web-97943-0c89be05ca8d.herokuapp.com/api"})}}]);