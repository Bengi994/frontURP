(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{1044:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/perfil",function(){return __webpack_require__(5124)}])},5124:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return perfil}});var jsx_runtime=__webpack_require__(5893),ResponsivePage=__webpack_require__(8776),context=__webpack_require__(2698),Form=__webpack_require__(1676),Button=__webpack_require__(5005),es=__webpack_require__(4231),index_esm=__webpack_require__(7536),yup=__webpack_require__(7533),api=__webpack_require__(2400);let useProfile=()=>{let update=async(data,id)=>{var ref;let response=await api.h.put("/users/".concat(id),{nombre:data.nombre,apellido:data.apellido,dni:data.dni,email:data.email,username:data.email,...data.password&&{password:data.password},direccion:data.direccion,zona:data.zona}).catch(response=>response.response);if(console.log(response),null===(ref=response.data)||void 0===ref?void 0:ref.error){let{message}=response.data.error;if(message.includes("already taken")){alert("Este correo ya se encuentra registrado por otro usuario");return}let{details:{errors}}=response.data.error;for(let{path,message:message1}of errors)path.includes("dni")&&message1.includes("unique")&&alert("Este DNI ya se encuentra registrado por otro usuario");return!1}return localStorage.setItem("user",JSON.stringify(response.data)),200===response.status};return{update}};var react=__webpack_require__(7294),Table=__webpack_require__(5147);let ZoneTable=()=>(0,jsx_runtime.jsxs)(Table.Z,{striped:!0,bordered:!0,hover:!0,className:"mt-5",children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("th",{children:"Zonas"}),(0,jsx_runtime.jsx)("th",{children:"Avenidas"})]})}),(0,jsx_runtime.jsxs)("tbody",{children:[(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:"A"}),(0,jsx_runtime.jsx)("td",{children:"Av. Benavides, Av.Caminos del Inca, Av. Velasco Astete, Av.Nasarenas"})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:"B"}),(0,jsx_runtime.jsx)("td",{children:"Av. Surco, Av.Ayacucho, Av. Mariscal Catilla, Av.Castellana"})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:"C"}),(0,jsx_runtime.jsx)("td",{children:"Av. Proceres, Av.Guardia civil norte, Av. Vista alegre, Av. El sol"})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:"D"}),(0,jsx_runtime.jsx)("td",{children:"Av. Primavera, Av. Angamos, Av. San luis, Av. Encalada"})]})]})]}),getProfileSchema=isEmployee=>es.Ry({nombre:es.Z_().required("El nombre es requerido"),apellido:es.Z_().required("El apellido es requerida"),dni:es.Z_().typeError("El DNI debe ser un digitos numericos").required("El DNI es requerido").max(8,"Tiene ser un maximo de 8 digitos").min(8,"Tiene ser un maximo de 8 digitos"),email:es.Z_().required("El tipo de producto es requerido").email("EL email tiene que tener el siguiente formato ejemplo@ejemplo.com"),password:es.Z_(),...!isEmployee&&{direccion:es.Z_().required("La direccion es requerida"),zona:es.Z_().required("La zona es requerida")}}),ProfileForm=()=>{let{user,isEmployee}=(0,context.XG)();console.log(null==user?void 0:user.role);let{update}=useProfile(),{register,handleSubmit,formState:{errors},setValue}=(0,index_esm.cI)({resolver:(0,yup.X)(getProfileSchema(isEmployee)),defaultValues:user});if((0,react.useEffect)(()=>{user&&!isEmployee&&setValue("zona",user.zona)},[user,setValue,isEmployee]),!user)return null;let handleOnSubmit=async data=>{let result=await update(data,user.id);if(result){alert("Se actualizo correctamente");return}};return(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center seccion--edit-profile",children:[(0,jsx_runtime.jsxs)("h1",{children:["Hola ",user.nombre," ",user.apellido]}),(0,jsx_runtime.jsxs)(Form.Z,{onSubmit:handleSubmit(handleOnSubmit),children:[(0,jsx_runtime.jsxs)(Form.Z.Group,{className:"mb-3",children:[(0,jsx_runtime.jsx)(Form.Z.Label,{children:"Nombre"}),(0,jsx_runtime.jsx)(Form.Z.Control,{type:"text",...register("nombre"),defaultValue:user.nombre}),errors.nombre&&(0,jsx_runtime.jsx)(Form.Z.Text,{className:"text-danger",children:errors.nombre.message})]}),(0,jsx_runtime.jsxs)(Form.Z.Group,{className:"mb-3",children:[(0,jsx_runtime.jsx)(Form.Z.Label,{children:"Apellido"}),(0,jsx_runtime.jsx)(Form.Z.Control,{type:"text",...register("apellido"),defaultValue:user.apellido}),errors.apellido&&(0,jsx_runtime.jsx)(Form.Z.Text,{className:"text-danger",children:errors.apellido.message})]}),(0,jsx_runtime.jsxs)(Form.Z.Group,{className:"mb-3",children:[(0,jsx_runtime.jsx)(Form.Z.Label,{children:"DNI"}),(0,jsx_runtime.jsx)(Form.Z.Control,{type:"number",...register("dni"),defaultValue:user.dni}),errors.dni&&(0,jsx_runtime.jsx)(Form.Z.Text,{className:"text-danger",children:errors.dni.message})]}),(0,jsx_runtime.jsxs)(Form.Z.Group,{className:"mb-3",children:[(0,jsx_runtime.jsx)(Form.Z.Label,{children:"Email"}),(0,jsx_runtime.jsx)(Form.Z.Control,{type:"email",...register("email"),defaultValue:user.email}),errors.email&&(0,jsx_runtime.jsx)(Form.Z.Text,{className:"text-danger",children:errors.email.message})]}),(0,jsx_runtime.jsxs)(Form.Z.Group,{className:"mb-3",children:[(0,jsx_runtime.jsx)(Form.Z.Label,{children:"Password"}),(0,jsx_runtime.jsx)(Form.Z.Control,{type:"password",...register("password")}),errors.password&&(0,jsx_runtime.jsx)(Form.Z.Text,{className:"text-danger",children:errors.password.message})]}),!isEmployee&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Form.Z.Group,{className:"mb-3",children:[(0,jsx_runtime.jsx)(Form.Z.Label,{children:"Direccion"}),(0,jsx_runtime.jsx)(Form.Z.Control,{type:"text",...register("direccion"),defaultValue:user.direccion}),errors.direccion&&(0,jsx_runtime.jsx)(Form.Z.Text,{className:"text-danger",children:errors.direccion.message})]}),(0,jsx_runtime.jsxs)(Form.Z.Group,{className:"mb-3",children:[(0,jsx_runtime.jsx)(Form.Z.Label,{children:"Zonas"}),(0,jsx_runtime.jsxs)(Form.Z.Select,{onChange:event=>setValue("zona",event.target.value),value:user.zona,children:[(0,jsx_runtime.jsx)("option",{children:"Seleccionar"}),(0,jsx_runtime.jsx)("option",{value:"A",children:"Zona A"}),(0,jsx_runtime.jsx)("option",{value:"B",children:"Zona B"}),(0,jsx_runtime.jsx)("option",{value:"C",children:"Zona C"}),(0,jsx_runtime.jsx)("option",{value:"D",children:"Zona D"})]}),errors.zona&&(0,jsx_runtime.jsx)(Form.Z.Text,{className:"text-danger",children:errors.zona.message})]})]}),(0,jsx_runtime.jsxs)(Button.Z,{className:"btn--loguin-invert",variant:"primary",type:"submit",children:["Actualizar"," ",(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,jsx_runtime.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,jsx_runtime.jsx)("path",{d:"M6.414 16L16.556 5.858l-1.414-1.414L5 14.586V16h1.414zm.829 2H3v-4.243L14.435 2.322a1 1 0 0 1 1.414 0l2.829 2.829a1 1 0 0 1 0 1.414L7.243 18zM3 20h18v2H3v-2z",fill:"rgba(255,255,255,1)"})]})]})]}),!isEmployee&&(0,jsx_runtime.jsx)(ZoneTable,{})]})},Perfil=()=>{let{user}=(0,context.XG)();return(0,jsx_runtime.jsx)(ResponsivePage.Y,{children:(0,jsx_runtime.jsx)("div",{className:"container",children:(0,jsx_runtime.jsx)(ProfileForm,{})})})};var perfil=Perfil},5147:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4184),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),_ThemeProvider__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6792),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5893);let Table=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({bsPrefix,className,striped,bordered,borderless,hover,size,variant,responsive,...props},ref)=>{let decoratedBsPrefix=(0,_ThemeProvider__WEBPACK_IMPORTED_MODULE_3__.vE)(bsPrefix,"table"),classes=classnames__WEBPACK_IMPORTED_MODULE_0___default()(className,decoratedBsPrefix,variant&&`${decoratedBsPrefix}-${variant}`,size&&`${decoratedBsPrefix}-${size}`,striped&&`${decoratedBsPrefix}-${"string"==typeof striped?`striped-${striped}`:"striped"}`,bordered&&`${decoratedBsPrefix}-bordered`,borderless&&`${decoratedBsPrefix}-borderless`,hover&&`${decoratedBsPrefix}-hover`),table=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("table",{...props,className:classes,ref:ref});if(responsive){let responsiveClass=`${decoratedBsPrefix}-responsive`;return"string"==typeof responsive&&(responsiveClass=`${responsiveClass}-${responsive}`),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:responsiveClass,children:table})}return table});__webpack_exports__.Z=Table}},function(__webpack_require__){__webpack_require__.O(0,[222,536,676,491,776,774,888,179],function(){return __webpack_require__(__webpack_require__.s=1044)}),_N_E=__webpack_require__.O()}]);