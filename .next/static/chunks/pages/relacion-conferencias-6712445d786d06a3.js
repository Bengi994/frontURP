(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[884],{9626:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/relacion-conferencias",function(){return __webpack_require__(9458)}])},8114:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{r:function(){return useCatalog}});var _utils_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2400);let useCatalog=()=>{let createCatalog=async(catalog,studentInfo)=>{let{data:{data:dataRaw}}=await _utils_api__WEBPACK_IMPORTED_MODULE_0__.h.post("/catologos",{data:catalog});return{...dataRaw.attributes,id:dataRaw.id}},getCatalogId=async catalogId=>{let response=await _utils_api__WEBPACK_IMPORTED_MODULE_0__.h.get("/catologos/".concat(catalogId)),catalogData=response.data.data.attributes;return catalogData},updateCatalog=async(catalogId,updatedCatalog)=>{let response=await _utils_api__WEBPACK_IMPORTED_MODULE_0__.h.put("/catologos/".concat(catalogId),{data:updatedCatalog});return 200===response.status?updatedCatalog:null},uploadPhoto=async(files,refId)=>{let formData=new FormData;formData.append("files",files),formData.append("ref","api::catologo.catologo"),formData.append("refId",refId),formData.append("field","foto");let response=await _utils_api__WEBPACK_IMPORTED_MODULE_0__.h.post("/upload",formData,{headers:{"content-type":"multipart/form-data"}});return 200===response.status};return{createCatalog,uploadPhoto,updateCatalog,getCatalogId}}},9086:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{$:function(){return useCatalogs}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),_utils_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2400);let useCatalogs=()=>{let[catalogs,setCatalogs]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),[SalonConferencia,setSalonConferencia]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),getSalonNombre=salonId=>{let salon=SalonConferencia.find(salon=>salon.id===salonId);return salon?salon.attributes.nombre:""},getCatalogs=async()=>{let{data:{data:dataRaw}}=await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.get("/catologos?populate=*"),catalogsMapping=dataRaw.map(param=>{let{id,attributes}=param;return{...attributes,id}});setCatalogs(catalogsMapping)},removeCatalog=async catalogId=>{await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.put("/catologos/".concat(catalogId),{data:{disponible:!1,miconf:!1}}),await getCatalogs()},enabledCatalog=async catalogId=>{await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.put("/catologos/".concat(catalogId),{data:{disponible:!0,miconf:!1}}),await getCatalogs()},myCatalog=async catalogId=>{await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.put("/catologos/".concat(catalogId),{data:{disponible:!0,miconf:!0}}),await getCatalogs()},getCatalogId=async catalogId=>{let response=await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.get("/catologos/".concat(catalogId)),catalogData=response.data.data.attributes;return catalogData};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{getCatalogs()},[]),{catalogs,removeCatalog,enabledCatalog,myCatalog,getCatalogId,getSalonNombre}}},9458:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return relacion_conferencias}});var jsx_runtime=__webpack_require__(5893),ResponsivePage=__webpack_require__(8776),useCatalogs=__webpack_require__(9086),Button=__webpack_require__(5005),react=__webpack_require__(7294),useCatalog=__webpack_require__(8114),index_esm=__webpack_require__(7536),context=__webpack_require__(2698);let handleDescargarCSV=()=>{let tabla=document.querySelector("table");if(!tabla){console.error("No se encontr\xf3 ninguna tabla en el documento.");return}let csv=[];tabla.querySelectorAll("tr").forEach(fila=>{let filaCSV=[];fila.querySelectorAll("td, th").forEach(celda=>{var ref;filaCSV.push('"'.concat(null===(ref=celda.textContent)||void 0===ref?void 0:ref.replace(/"/g,'""'),'"'))}),csv.push(filaCSV.join(","))});let blob=new Blob([csv.join("\n")],{type:"text/csv;charset=utf-8;"}),url=URL.createObjectURL(blob),link=document.createElement("a");link.href=url,link.download="inscritos.csv",document.body.appendChild(link),link.click(),document.body.removeChild(link)},TablaInscritos=param=>{let{estado,cambiarEstado,catalogo,setCatalogo}=param,{user}=(0,context.XG)(),{register,handleSubmit,formState:{errors}}=(0,index_esm.cI)(),{updateCatalog}=(0,useCatalog.r)(),{catalogs,myCatalog}=(0,useCatalogs.$)(),[estadoModal,cambiarEstadoModal]=(0,react.useState)(!1);return!function(fechaOriginal){let fecha=new Date(fechaOriginal),dia=fecha.getDate(),mes=fecha.toLocaleDateString("es-ES",{month:"long"});fecha.getFullYear(),"".concat(dia," de ").concat(mes)}(Date.parse(null==catalogo?void 0:catalogo.fecha)),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:estado&&(0,jsx_runtime.jsx)("div",{className:"overlay",children:(0,jsx_runtime.jsxs)("div",{className:"contenido-modal",children:[(0,jsx_runtime.jsx)("div",{className:"encabezado-modal",children:(0,jsx_runtime.jsx)("h3",{children:"Relaci\xf3n de inscritos:"})}),(0,jsx_runtime.jsx)("button",{className:"boton-cerrar",onClick:()=>cambiarEstado(!1),children:(0,jsx_runtime.jsx)("img",{src:"\\close-solid.svg",alt:"close"})}),(0,jsx_runtime.jsx)("div",{className:"contenido-tabla-relaciones",children:(0,jsx_runtime.jsxs)("div",{className:"seccion-tabla-relaciones",children:[(0,jsx_runtime.jsxs)("table",{children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("th",{children:"Nombre"}),(0,jsx_runtime.jsx)("th",{children:"Apellido"}),(0,jsx_runtime.jsx)("th",{children:"C\xf3digo"}),(0,jsx_runtime.jsx)("th",{children:"Carrera"}),(0,jsx_runtime.jsx)("th",{children:"Asistencia"})]})}),(0,jsx_runtime.jsx)("tbody",{children:catalogo.inscripciones&&catalogo.inscripciones.map((inscripcion,index)=>(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{children:inscripcion.nombre}),(0,jsx_runtime.jsx)("td",{children:inscripcion.apellido}),(0,jsx_runtime.jsx)("td",{children:inscripcion.codigo}),(0,jsx_runtime.jsx)("td",{children:inscripcion.carrera}),(0,jsx_runtime.jsx)("td",{children:inscripcion.asistencia})]},index))})]}),(0,jsx_runtime.jsx)("div",{className:"botones-tabla",children:(0,jsx_runtime.jsx)(Button.Z,{variant:"primary",onClick:handleDescargarCSV,children:"Descargar CSV"})})]})})]})})})};var next_link=__webpack_require__(1664),link_default=__webpack_require__.n(next_link);let CatalogRow=param=>{var ref,ref1;let{catalog}=param,[estadoModal,cambiarEstadoModal]=(0,react.useState)(!1),[catalogElement,setCatalogElement]=(0,react.useState)();return(0,jsx_runtime.jsxs)("div",{className:"catalog-row",children:[(0,jsx_runtime.jsxs)("div",{className:"catalog-row-info",children:[(0,jsx_runtime.jsxs)("span",{children:[function(fechaOriginal){let fecha=new Date(fechaOriginal),dia=fecha.getDate(),mes=fecha.toLocaleDateString("es-ES",{month:"long"}),anio=fecha.getFullYear();return"".concat(dia," de ").concat(mes," de ").concat(anio)}(catalog.fecha)," -"," ",catalog.hora?catalog.hora.slice(0,5):""]}),(0,jsx_runtime.jsx)("span",{children:null===(ref=catalog.salon)||void 0===ref?void 0:null===(ref1=ref.data)||void 0===ref1?void 0:ref1.attributes.nombre}),(0,jsx_runtime.jsx)("span",{children:catalog.tema_conferencia})]}),(0,jsx_runtime.jsxs)("div",{className:"catalog-row-action flex-column",children:[(0,jsx_runtime.jsx)(link_default(),{className:"btnInscribir position-relative w-100",href:"/conferencia-curso/".concat(catalog.id),children:"Pasar asistencia"}),(0,jsx_runtime.jsx)(Button.Z,{className:"btnInscribir position-relative w-100",onClick(){cambiarEstadoModal(!estadoModal),setCatalogElement(catalog)},children:"Ver relaci\xf3n"})]}),(0,jsx_runtime.jsx)(TablaInscritos,{estado:estadoModal,cambiarEstado:cambiarEstadoModal,catalogo:catalog,setCatalogo:setCatalogElement})]},"catalog-".concat(catalog.id))},VerCatalogo=()=>{let{catalogs}=(0,useCatalogs.$)();console.log(catalogs);let conferenciasDisponibles=catalogs.filter(catalog=>catalog.disponible);return(0,jsx_runtime.jsxs)(ResponsivePage.Y,{children:[(0,jsx_runtime.jsx)("div",{className:"container mt-3 mb-4",children:(0,jsx_runtime.jsx)("h2",{children:"Ver relaci\xf3n de conferencias"})}),conferenciasDisponibles.map(catalog=>(0,jsx_runtime.jsx)(CatalogRow,{catalog:catalog},catalog.id))]})};var relacion_conferencias=VerCatalogo}},function(__webpack_require__){__webpack_require__.O(0,[222,536,776,774,888,179],function(){return __webpack_require__(__webpack_require__.s=9626)}),_N_E=__webpack_require__.O()}]);