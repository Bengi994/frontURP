(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[356],{6615:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/restablecer-contrasena",function(){return __webpack_require__(5069)}])},5956:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{m:function(){return useRegister}});var _utils_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2400);let useRegister=()=>{let createClient=async data=>{var ref;let response=await _utils_api__WEBPACK_IMPORTED_MODULE_0__.h.post("/auth/local/register",{...data,username:data.email,role:{id:3}}).catch(response=>response.response);if(null===(ref=response.data)||void 0===ref?void 0:ref.error){let{message}=response.data.error;if(message.includes("already taken"))return alert("El email ya se encuentra registrado"),!1;let{details:{errors}}=response.data.error;for(let{path,message:message1}of errors)path.includes("dni")&&message1.includes("unique")&&alert("Este DNI ya se encuentra registrado por otro usuario");return!1}let{jwt,user}=response.data;return localStorage.setItem("token",jwt),localStorage.setItem("user",JSON.stringify(user)),user},forgotPassword=async email=>{let{data}=await _utils_api__WEBPACK_IMPORTED_MODULE_0__.h.post("/auth/forgot-password",{email}),{ok}=data;return ok?data.resetPasswordToken:"Algo salio mal"},resetPassword=async reset=>{let response=await _utils_api__WEBPACK_IMPORTED_MODULE_0__.h.post("/auth/reset-password",reset);return 200===response.status};return{createClient,forgotPassword,resetPassword}}},5069:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),_components_ResponsivePage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8776),react_hook_form__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7536),_hookform_resolvers_yup__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7533),yup__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4231),react_bootstrap__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1676),react_bootstrap__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5005),next_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1163),_hooks_register_useRegister__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5956);let validationSchema=yup__WEBPACK_IMPORTED_MODULE_2__.Ry({password:yup__WEBPACK_IMPORTED_MODULE_2__.Z_().required("Contrase\xf1a es requerido"),passwordConfirmation:yup__WEBPACK_IMPORTED_MODULE_2__.Z_().oneOf([yup__WEBPACK_IMPORTED_MODULE_2__.iH("password"),null],"No coincide con la contrase\xf1a").required("Contrase\xf1a es requerido")}),RestablecerContrasena=()=>{let{register,handleSubmit,formState:{errors}}=(0,react_hook_form__WEBPACK_IMPORTED_MODULE_5__.cI)({resolver:(0,_hookform_resolvers_yup__WEBPACK_IMPORTED_MODULE_6__.X)(validationSchema)}),{resetPassword}=(0,_hooks_register_useRegister__WEBPACK_IMPORTED_MODULE_4__.m)(),{query,push}=(0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)(),code=query.code,handleOnSubmit=async data=>{let result=await resetPassword({...data,code:"".concat(code)});if(result){await push("/iniciar-sesion");return}alert("Algo salio mal")};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ResponsivePage__WEBPACK_IMPORTED_MODULE_1__.Y,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{children:"Restablecer Contrase\xf1a"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z,{onSubmit:handleSubmit(handleOnSubmit),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z.Group,{className:"mb-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z.Label,{children:"Contrase\xf1a"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z.Control,{type:"password",...register("password")}),errors.password&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z.Text,{className:"text-danger",children:errors.password.message})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z.Group,{className:"mb-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z.Label,{children:"Verifique Contrase\xf1a"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z.Control,{type:"password",...register("passwordConfirmation")}),errors.passwordConfirmation&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Z.Text,{className:"text-danger",children:errors.passwordConfirmation.message})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_8__.Z,{variant:"primary",type:"submit",children:"Restablecer contrase\xf1a"})]})]})})})};__webpack_exports__.default=RestablecerContrasena}},function(__webpack_require__){__webpack_require__.O(0,[222,536,676,491,776,774,888,179],function(){return __webpack_require__(__webpack_require__.s=6615)}),_N_E=__webpack_require__.O()}]);