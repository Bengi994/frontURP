(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{7936:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/repositorio",function(){return __webpack_require__(4853)}])},9086:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{$:function(){return useCatalogs}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),_utils_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2400);let useCatalogs=()=>{let[catalogs,setCatalogs]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),[SalonConferencia,setSalonConferencia]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),getSalonNombre=salonId=>{let salon=SalonConferencia.find(salon=>salon.id===salonId);return salon?salon.attributes.nombre:""},getCatalogs=async()=>{let{data:{data:dataRaw}}=await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.get("/catologos?populate=*"),catalogsMapping=dataRaw.map(param=>{let{id,attributes}=param;return{...attributes,id}});setCatalogs(catalogsMapping)},removeCatalog=async catalogId=>{await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.put("/catologos/".concat(catalogId),{data:{disponible:!1,miconf:!1}}),await getCatalogs()},enabledCatalog=async catalogId=>{await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.put("/catologos/".concat(catalogId),{data:{disponible:!0,miconf:!1}}),await getCatalogs()},myCatalog=async catalogId=>{await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.put("/catologos/".concat(catalogId),{data:{disponible:!0,miconf:!0}}),await getCatalogs()},getCatalogId=async catalogId=>{let response=await _utils_api__WEBPACK_IMPORTED_MODULE_1__.h.get("/catologos/".concat(catalogId)),catalogData=response.data.data.attributes;return catalogData};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{getCatalogs()},[]),{catalogs,removeCatalog,enabledCatalog,myCatalog,getCatalogId,getSalonNombre}}},4853:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return repositorio}});var jsx_runtime=__webpack_require__(5893),ResponsivePage=__webpack_require__(8776),next_link=__webpack_require__(1664),link_default=__webpack_require__.n(next_link),react=__webpack_require__(7294);__webpack_require__(1535);var index_es=__webpack_require__(9603),free_solid_svg_icons=__webpack_require__(9417),useCatalogs=__webpack_require__(9086),Card=__webpack_require__(7525),context=__webpack_require__(2698),axios=__webpack_require__(5121);let CatalogCardInscrito=param=>{var ref,ref1,ref2,ref3,ref4,ref5;let{catalog}=param,{user}=(0,context.XG)(),[fotoUrl,setFotoUrl]=(0,react.useState)(""),estado="",fecha=new Date,fechaConferencia=new Date(catalog.fecha);return fechaConferencia.setDate(fechaConferencia.getDate()+1),null!=catalog.inscripciones&&catalog.inscripciones.forEach(inscripcion=>{estado=inscripcion.codigo==(null==user?void 0:user.codigo)&&"Si"==inscripcion.asistencia?"Asisti\xf3":fechaConferencia>fecha?"Pendiente":"No asisti\xf3"}),(0,react.useEffect)(()=>{let fetchData=async()=>{try{let apiFoto=await axios.Z.get("https://shrieking-web-97943-0c89be05ca8d.herokuapp.com/api/catologos/".concat(catalog.id,"?populate=foto")),url=apiFoto.data.data.attributes.foto.data.attributes.url;setFotoUrl("https://shrieking-web-97943-0c89be05ca8d.herokuapp.com".concat(url))}catch(error){console.error("Error al obtener la foto:",error)}};fetchData()},[catalog.id]),(0,jsx_runtime.jsxs)(Card.Z,{children:[(0,jsx_runtime.jsx)("div",{className:"cont-img",children:(0,jsx_runtime.jsx)(Card.Z.Img,{variant:"top",src:(null===(ref=catalog.foto)||void 0===ref?void 0:null===(ref1=ref.data)||void 0===ref1?void 0:ref1.attributes.url)||"https://res.cloudinary.com/dbe36qiba/image/upload/v1700542339/1_mcbxr_Q9dmg_X6v8_KA_7_Uo4nw_acc5422e6f.jpg"})}),(0,jsx_runtime.jsxs)(Card.Z.Body,{className:"card-body-inscrito",children:[(0,jsx_runtime.jsx)(Card.Z.Title,{children:catalog.tema_conferencia}),(0,jsx_runtime.jsxs)("p",{className:"nombre-expositor",children:["Dirigido por: ",catalog.expositor]}),(0,jsx_runtime.jsxs)("div",{className:"card-inscrito",children:[(0,jsx_runtime.jsxs)("div",{className:"card-inscrito-seccion-texto",children:[(0,jsx_runtime.jsx)("div",{className:"card-estado-conferencia",children:"Asisti\xf3"===estado?(0,jsx_runtime.jsx)("img",{src:"\\icon-check.png",alt:"asistio"}):"No asisti\xf3"===estado?(0,jsx_runtime.jsx)("img",{src:"\\icon-equis.png",alt:"noAsistio"}):(0,jsx_runtime.jsx)("img",{src:"\\icon-clock.png",alt:"pendiente"})}),(0,jsx_runtime.jsxs)("p",{className:"card-inscrito-texto",children:[(0,jsx_runtime.jsx)("img",{src:"\\calendario-icon-black.svg",alt:"fecha"}),catalog.fecha," -"," ",null===catalog.hora?"":catalog.hora.slice(0,5)]}),(0,jsx_runtime.jsxs)("p",{className:"card-inscrito-texto",children:[(0,jsx_runtime.jsx)("img",{src:"\\salon-icon-black.svg",alt:"salon"}),(null===(ref2=null==catalog?void 0:catalog.salon.data)||void 0===ref2?void 0:null===(ref3=ref2.attributes)||void 0===ref3?void 0:ref3.nombre)===null?"":null===(ref4=catalog.salon.data)||void 0===ref4?void 0:null===(ref5=ref4.attributes)||void 0===ref5?void 0:ref5.nombre]})]}),(0,jsx_runtime.jsx)("div",{className:"card-inscrito-seccion-boton",children:catalog.repositorio?(0,jsx_runtime.jsx)("a",{href:catalog.repositorio,target:"_blank",rel:"noopener noreferrer",children:"VER MATERIAL"}):(0,jsx_runtime.jsx)("span",{children:"MATERIAL NO DISPONIBLE"})})]})]})]},"catalog-".concat(catalog.id))},BuscadorRepo=()=>{let[conferencias,setConfe]=(0,react.useState)([]),[busqueda,setBusqueda]=(0,react.useState)(""),{user}=(0,context.XG)(),opcionSeleccionada="",{catalogs}=(0,useCatalogs.$)(),conferenciasDisponibles=catalogs.filter(catalog=>catalog.disponible);(0,react.useEffect)(()=>{setConfe(conferenciasDisponibles)},[catalogs]);let handleChange=e=>{setBusqueda(e.target.value),filtrar(e.target.value)},hoy=new Date,filtrar=terminoBusqueda=>{setConfe(conferenciasDisponibles.filter(catalog=>{var ref,ref1;let fc=catalog.fecha,fechaConferencia=new Date(fc.toString());if(fechaConferencia.setDate(fechaConferencia.getDate()+1),catalog.tema_conferencia.toString().toLowerCase().includes(terminoBusqueda.toLowerCase())||catalog.expositor.toString().toLowerCase().includes(terminoBusqueda.toLowerCase())||catalog.dirigido.toString().toLowerCase().includes(terminoBusqueda.toLowerCase())||(null===(ref=null==catalog?void 0:catalog.salon.data)||void 0===ref?void 0:null===(ref1=ref.attributes)||void 0===ref1?void 0:ref1.nombre.toString().toLowerCase().includes(terminoBusqueda.toLowerCase()))||catalog.fecha.toString().toLowerCase().includes(terminoBusqueda.toLowerCase())||"hoy"===terminoBusqueda.toLowerCase()&&fechaConferencia.toLocaleDateString()==hoy.toLocaleDateString())return catalog}))};(0,react.useEffect)(()=>{filtrar(busqueda)},[busqueda,catalogs]);let handleChange2=e=>{console.log(opcionSeleccionada=e.target.value),filtrarCombo()},filtrarCombo=()=>{var resultadosBusqueda=conferenciasDisponibles.filter(catalog=>{let fecha=new Date,fechaConferencia=new Date(catalog.fecha);return fechaConferencia.setDate(fechaConferencia.getDate()+1),console.log(null==user?void 0:user.codigo),"Asisti\xf3"==opcionSeleccionada?catalog.inscripciones.some(inscripcion=>"Si"===inscripcion.asistencia&&inscripcion.codigo==(null==user?void 0:user.codigo)&&"Asisti\xf3"==opcionSeleccionada):"No asisti\xf3"==opcionSeleccionada?catalog.inscripciones.some(inscripcion=>inscripcion.codigo!=(null==user?void 0:user.codigo)&&fechaConferencia<fecha&&"No"==inscripcion.asistencia):"Pendiente"==opcionSeleccionada?catalog.inscripciones.some(inscripcion=>fechaConferencia>fecha):void 0});console.log(resultadosBusqueda),setConfe(resultadosBusqueda)};return(0,jsx_runtime.jsxs)("div",{className:"contenedor-buscador-confes",children:[(0,jsx_runtime.jsxs)("div",{className:"contenedor-input",children:[(0,jsx_runtime.jsx)("button",{className:"botonBuscador",children:(0,jsx_runtime.jsx)(index_es.G,{icon:free_solid_svg_icons.wn1})}),(0,jsx_runtime.jsx)("input",{className:"inputBuscar",value:busqueda,placeholder:"Buscar conferencia por tema, expositor, escuela, auditorio, fecha...",onChange:handleChange})]}),(0,jsx_runtime.jsxs)("div",{className:"container filtrado-comboBox",children:[(0,jsx_runtime.jsx)("div",{className:"filtrado-comboBox-seccion",children:(0,jsx_runtime.jsxs)("select",{id:"asistencia",value:opcionSeleccionada,onChange:handleChange2,children:[(0,jsx_runtime.jsx)("option",{value:"1",children:"Filtrado por asistencia"}),(0,jsx_runtime.jsx)("option",{value:"Asisti\xf3",children:"Asisti\xf3"}),(0,jsx_runtime.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,jsx_runtime.jsx)("option",{value:"No asisti\xf3",children:"No asisti\xf3"})]})}),(0,jsx_runtime.jsx)("div",{className:"filtrado-comboBox-seccion",children:(0,jsx_runtime.jsxs)("select",{id:"carrera",value:opcionSeleccionada,onChange:handleChange2,children:[(0,jsx_runtime.jsx)("option",{value:"1",children:"Filtrado por carrera"}),(0,jsx_runtime.jsx)("option",{value:"2",children:"Ingenier\xeda Inform\xe1tica"}),(0,jsx_runtime.jsx)("option",{value:"3",children:"Ingenier\xeda Industrial"}),(0,jsx_runtime.jsx)("option",{value:"4",children:"Ingenier\xeda Civil"})]})}),(0,jsx_runtime.jsx)("div",{className:"filtrado-comboBox-seccion",children:(0,jsx_runtime.jsxs)("select",{id:"tiempo",value:opcionSeleccionada,onChange:handleChange2,children:[(0,jsx_runtime.jsx)("option",{value:"1",children:"Filtrado por tiempo"}),(0,jsx_runtime.jsx)("option",{value:"2",children:"Este a\xf1o"}),(0,jsx_runtime.jsx)("option",{value:"3",children:"Este mes"}),(0,jsx_runtime.jsx)("option",{value:"4",children:"Esta semana"})]})})]}),(0,jsx_runtime.jsx)("div",{className:"container contenedor-proximos",children:(0,jsx_runtime.jsx)("div",{className:"contenedor-catalogo",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(100%, 20rem), 1fr))",columnGap:"35px",rowGap:"25px",marginTop:"20px"},children:conferencias.map(catalog=>(0,jsx_runtime.jsx)(CatalogCardInscrito,{catalog:catalog},catalog.id))})})]})},VerCatalogo=()=>(0,jsx_runtime.jsxs)(ResponsivePage.Y,{children:[(0,jsx_runtime.jsxs)("div",{className:"container mt-3 mb-4 header-mis-conferencias",children:[(0,jsx_runtime.jsx)("h2",{children:"Repositorio de conferencias"}),(0,jsx_runtime.jsx)(link_default(),{href:"/mis-conferencias",children:(0,jsx_runtime.jsx)("img",{src:"\\icon-forward.svg",alt:"search"})})]}),(0,jsx_runtime.jsxs)("div",{className:"container senalizacion",children:[(0,jsx_runtime.jsxs)("div",{className:"senalizacion-seccion",children:[(0,jsx_runtime.jsx)("img",{src:"/icon-check.png",alt:"check"}),(0,jsx_runtime.jsx)("h6",{children:"Asisti\xf3"})]}),(0,jsx_runtime.jsxs)("div",{className:"senalizacion-seccion",children:[(0,jsx_runtime.jsx)("img",{src:"/icon-equis.png",alt:"equis"}),(0,jsx_runtime.jsx)("h6",{children:"No asisti\xf3"})]}),(0,jsx_runtime.jsxs)("div",{className:"senalizacion-seccion",children:[(0,jsx_runtime.jsx)("img",{src:"/icon-clock.png",alt:"clock"}),(0,jsx_runtime.jsx)("h6",{children:"Pendiente"})]})]}),(0,jsx_runtime.jsx)(BuscadorRepo,{})]});var repositorio=VerCatalogo}},function(__webpack_require__){__webpack_require__.O(0,[976,428,222,129,776,774,888,179],function(){return __webpack_require__(__webpack_require__.s=7936)}),_N_E=__webpack_require__.O()}]);